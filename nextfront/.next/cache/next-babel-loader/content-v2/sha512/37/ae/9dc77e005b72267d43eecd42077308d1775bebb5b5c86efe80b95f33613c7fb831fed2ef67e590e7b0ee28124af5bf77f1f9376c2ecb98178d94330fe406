{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from 'react';\nimport { Button, Modal } from 'react-bootstrap';\nimport FormInput from './form-input-sign-in-and-sign-out.component';\nimport CustomButton from './custom-button.component';\nimport md5 from 'md5';\nimport Cookies from \"js-cookie\"; // import './sign-in.styles.scss';\n\nimport AuthApi from \"./AuthApi\";\nimport styles from '../styles/sign-in.module.scss';\n\nclass SignIn extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"handleSubmit\", async event => {\n      event.preventDefault();\n      const {\n        email,\n        password\n      } = this.state;\n      const encpassword = md5(this.state.password);\n      console.log(\"Enc password===>\", encpassword);\n      this.setState({\n        encPassword: encpassword\n      }, () => {\n        try {\n          const data = {\n            email: this.state.email,\n            password: this.state.encPassword\n          };\n          fetch('http://127.0.0.1:5000/signin', {\n            method: 'POST',\n            headers: {\n              'Content-type': 'application/json'\n            },\n            body: JSON.stringify(data)\n          }).then(response => response.json()).then(response => {\n            if (response.status != 401 && response.status != 404) {\n              console.log(\"response==>\", response);\n              Cookies.set('userid', response.uid);\n              Cookies.set('email', response.email);\n              Cookies.set('displayname', response.displayname); // var sessionid = response.sessionid.split(\":\")\n\n              Cookies.set('token', response.token); // fetch(`http://localhost:5000/set/${response.email}`, {\n              //   method: 'POST',\n              //   headers: { 'Content-type': 'application/json' },\n              //   // body: JSON.stringify(data)\n              // })\n              //   .then(response => response.json())\n              //   .then(response => {\n              //     Cookies.set('session', response);\n              //     console.log(\"cookie response from set api ==>\",response)\n              //   })\n\n              this.setState({\n                userValid: true,\n                show: true\n              });\n              this.props.userauth();\n            } else {\n              this.setState({\n                userValid: false,\n                show: true\n              });\n            }\n          });\n        } catch (error) {\n          console.log(error);\n        }\n      });\n    });\n\n    _defineProperty(this, \"handleChange\", event => {\n      const {\n        value,\n        name\n      } = event.target;\n      this.setState({\n        [name]: value\n      });\n    });\n\n    this.state = {\n      email: '',\n      password: '',\n      encPassword: '',\n      userValid: false,\n      show: false\n    };\n  }\n\n  render() {\n    const handleClose = () => this.setState({\n      show: false\n    });\n\n    return /*#__PURE__*/_jsxs(\"div\", {\n      className: styles.signin,\n      children: [/*#__PURE__*/_jsx(\"h2\", {\n        children: \"I already have an account\"\n      }), /*#__PURE__*/_jsx(\"span\", {\n        children: \"Sign in with your email and password\"\n      }), /*#__PURE__*/_jsxs(\"form\", {\n        onSubmit: this.handleSubmit,\n        children: [/*#__PURE__*/_jsx(FormInput, {\n          name: \"email\",\n          type: \"email\",\n          handleChange: this.handleChange,\n          value: this.state.email,\n          label: \"email\",\n          required: true\n        }), /*#__PURE__*/_jsx(FormInput, {\n          name: \"password\",\n          type: \"password\",\n          value: this.state.password,\n          handleChange: this.handleChange,\n          label: \"password\",\n          required: true\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: styles.buttons,\n          children: /*#__PURE__*/_jsx(CustomButton, {\n            type: \"submit\",\n            children: \" Sign in \"\n          })\n        })]\n      }), /*#__PURE__*/_jsxs(Modal, {\n        show: this.state.show,\n        onHide: handleClose,\n        children: [/*#__PURE__*/_jsx(Modal.Header, {\n          closeButton: true,\n          children: /*#__PURE__*/_jsx(Modal.Title, {\n            children: \"Report\"\n          })\n        }), this.state.userValid == true ? /*#__PURE__*/_jsxs(Modal.Body, {\n          children: [\"User with Email: \", this.state.email, \" is logging In.\"]\n        }) : /*#__PURE__*/_jsxs(Modal.Body, {\n          children: [\"User with Email : \", this.state.email, \" Not Found .\"]\n        }), /*#__PURE__*/_jsx(Modal.Footer, {\n          children: /*#__PURE__*/_jsx(Button, {\n            variant: \"primary\",\n            onClick: handleClose,\n            children: \"Close\"\n          })\n        })]\n      })]\n    });\n  }\n\n}\n\nexport default SignIn;","map":null,"metadata":{},"sourceType":"module"}