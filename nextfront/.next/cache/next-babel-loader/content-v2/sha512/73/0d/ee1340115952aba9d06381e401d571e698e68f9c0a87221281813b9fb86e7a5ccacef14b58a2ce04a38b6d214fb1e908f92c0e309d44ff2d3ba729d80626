{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"/home/trex/Desktop/practiceapp/personaldetailsfull/nextfront/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/trex/Desktop/practiceapp/personaldetailsfull/nextfront/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/trex/Desktop/practiceapp/personaldetailsfull/nextfront/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/trex/Desktop/practiceapp/personaldetailsfull/nextfront/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/home/trex/Desktop/practiceapp/personaldetailsfull/nextfront/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/trex/Desktop/practiceapp/personaldetailsfull/nextfront/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/home/trex/Desktop/practiceapp/personaldetailsfull/nextfront/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/trex/Desktop/practiceapp/personaldetailsfull/nextfront/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"/home/trex/Desktop/practiceapp/personaldetailsfull/nextfront/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport { Button, Modal } from 'react-bootstrap';\nimport FormInput from './form-input-sign-in-and-sign-out.component';\nimport CustomButton from './custom-button.component';\nimport md5 from 'md5';\nimport Cookies from \"js-cookie\"; // import './sign-in.styles.scss';\n\nimport AuthApi from \"./AuthApi\";\nimport styles from '../styles/sign-in.module.scss';\n\nvar SignIn = /*#__PURE__*/function (_React$Component) {\n  _inherits(SignIn, _React$Component);\n\n  var _super = _createSuper(SignIn);\n\n  function SignIn(props) {\n    var _this;\n\n    _classCallCheck(this, SignIn);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSubmit\", /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(event) {\n        var _this$state, email, password, encpassword;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                event.preventDefault();\n                _this$state = _this.state, email = _this$state.email, password = _this$state.password;\n                encpassword = md5(_this.state.password);\n                console.log(\"Enc password===>\", encpassword);\n\n                _this.setState({\n                  encPassword: encpassword\n                }, function () {\n                  try {\n                    var data = {\n                      email: _this.state.email,\n                      password: _this.state.encPassword\n                    };\n                    fetch('http://127.0.0.1:5000/signin', {\n                      method: 'POST',\n                      headers: {\n                        'Content-type': 'application/json'\n                      },\n                      body: JSON.stringify(data)\n                    }).then(function (response) {\n                      return response.json();\n                    }).then(function (response) {\n                      if (response.status != 401 && response.status != 404) {\n                        console.log(\"response==>\", response);\n                        Cookies.set('userid', response.uid);\n                        Cookies.set('email', response.email);\n                        Cookies.set('displayname', response.displayname); // var sessionid = response.sessionid.split(\":\")\n\n                        Cookies.set('token', response.token); // fetch(`http://localhost:5000/set/${response.email}`, {\n                        //   method: 'POST',\n                        //   headers: { 'Content-type': 'application/json' },\n                        //   // body: JSON.stringify(data)\n                        // })\n                        //   .then(response => response.json())\n                        //   .then(response => {\n                        //     Cookies.set('session', response);\n                        //     console.log(\"cookie response from set api ==>\",response)\n                        //   })\n\n                        _this.setState({\n                          userValid: true,\n                          show: true\n                        });\n\n                        _this.props.userauth();\n                      } else {\n                        _this.setState({\n                          userValid: false,\n                          show: true\n                        });\n                      }\n                    });\n                  } catch (error) {\n                    console.log(error);\n                  }\n                });\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChange\", function (event) {\n      var _event$target = event.target,\n          value = _event$target.value,\n          name = _event$target.name;\n\n      _this.setState(_defineProperty({}, name, value));\n    });\n\n    _this.state = {\n      email: '',\n      password: '',\n      encPassword: '',\n      userValid: false,\n      show: false\n    };\n    return _this;\n  }\n\n  _createClass(SignIn, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var handleClose = function handleClose() {\n        return _this2.setState({\n          show: false\n        });\n      };\n\n      return /*#__PURE__*/_jsxs(\"div\", {\n        className: styles.signin,\n        children: [/*#__PURE__*/_jsx(\"h2\", {\n          children: \"I already have an account\"\n        }), /*#__PURE__*/_jsx(\"span\", {\n          children: \"Sign in with your email and password\"\n        }), /*#__PURE__*/_jsxs(\"form\", {\n          onSubmit: this.handleSubmit,\n          children: [/*#__PURE__*/_jsx(FormInput, {\n            name: \"email\",\n            type: \"email\",\n            handleChange: this.handleChange,\n            value: this.state.email,\n            label: \"email\",\n            required: true\n          }), /*#__PURE__*/_jsx(FormInput, {\n            name: \"password\",\n            type: \"password\",\n            value: this.state.password,\n            handleChange: this.handleChange,\n            label: \"password\",\n            required: true\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: styles.buttons,\n            children: /*#__PURE__*/_jsx(CustomButton, {\n              type: \"submit\",\n              children: \" Sign in \"\n            })\n          })]\n        }), /*#__PURE__*/_jsxs(Modal, {\n          show: this.state.show,\n          onHide: handleClose,\n          children: [/*#__PURE__*/_jsx(Modal.Header, {\n            closeButton: true,\n            children: /*#__PURE__*/_jsx(Modal.Title, {\n              children: \"Report\"\n            })\n          }), this.state.userValid == true ? /*#__PURE__*/_jsxs(Modal.Body, {\n            children: [\"User with Email: \", this.state.email, \" is logging In.\"]\n          }) : /*#__PURE__*/_jsxs(Modal.Body, {\n            children: [\"User with Email : \", this.state.email, \" Not Found .\"]\n          }), /*#__PURE__*/_jsx(Modal.Footer, {\n            children: /*#__PURE__*/_jsx(Button, {\n              variant: \"primary\",\n              onClick: handleClose,\n              children: \"Close\"\n            })\n          })]\n        })]\n      });\n    }\n  }]);\n\n  return SignIn;\n}(React.Component);\n\nexport default SignIn;","map":null,"metadata":{},"sourceType":"module"}